---
title: 【Javascript】日历组件
---
学习时间：2017.3.28

**效果**

- 组件默认一直呈显示状态
- 通过某种方式选择年、月，选择了年月后，日期列表做相应切换
- 通过单击某个具体的日期进行日期选择
- 组件初始化时，可配置可选日期的上下限。可选日期和不可选日期需要有样式上的区别
- 提供设定日期的接口，指定具体日期，日历面板相应日期选中
- 提供获取日期的接口，获取日历面板中当前选中的日期，返回一个日期对象（或其他形式，自定）

**思路**

1.html中创建一个div，添加id名和类名。

2.(function(){})();

3.我们需要了解javascript Date对象，[了解更多点击此处]( http://www.w3school.com.cn/jsref/jsref_obj_date.asp)

```javascript
var d1 = new Date();  // 获取当前系统时间 我现在的时间是 2017年3月28日 星期二
d1.getFullYear();    // 获取年信息， 此处结果：2017
d1.getMonth();      // 获取月信息（从0开始 范围：0-11） 此处结果：2
d1.getDate();      // 获取天信息 此处结果：28
d1.getDay();      // 获取星期信息 （0-6） 此处结果： 12
```

也可以直接初始化设置年月日信息

```javascript
//设置我的生日日期 1998.7.16
var d2 = new Date(1998, 6, 16);    // 月是从0开始计数， 需要减1
d2.getFullYear();          // 1998
d2.getMonth();            // 6
d2.getDate();            // 16
d2.toLocaleDateString();      // "1998/7/16" 
```

日历中会涉及到每个月多少天之类的问题，在js中很简单，如果设置年月日的时候，超出当月，js会自动算成下个月的，例如4月只有30天，如果设置成31 日，获得的Date类型中自动会算成5月1日；如果设置成5月0日，js会处理成4月30日，那么5月-1日也就是4月29日。

```javascript
var d3 = new Date(2016, 3, 30);
d3.toLocaleDateString();      // "2016/4/30"
var d4 = new Date(2016, 3, 31);
d4.toLocaleDateString();      // "2016/5/1"
var d5 = new Date(2016, 3, 33);
d5.toLocaleDateString();      // "2016/5/3"
var d6 = new Date(2016, 4, 1);
d6.toLocaleDateString();      // "2016/5/1"
var d7 = new Date(2016, 4, 0);
d7.toLocaleDateString();      // "2016/4/30"
var d8 = new Date(2016, 4, -3);
d8.toLocaleDateString();      // "2016/4/27"
```

4.定义一个全局的date对象变量，用来记录表格中需要显示的年月信息。

标题中的内容根据date对象取，表格中的日期则获取date对象中取年月对应的1号的所有信息，即可确定1号在表格第一行的位置，依次倒推上个月最后几天的数据、正推本月和下个月的数据。

5.设置renderHtml函数。获取html创建的那个div，为这个div创建两个子div，第一个盒子作为标题，需要显示上一个月、当前年月、下一个月。第二个盒子为表格区，用来显示当前月份的日期数据。不过再添加这两个盒子作为div的子元素前，我们先要对这两个盒子进行设置。

6.为第一个盒子添加样式和内容。样式在css文件里设定，然后把类名通过className赋给它；innerHTML给这个盒子写入上面我所说的三个要素。

7.同样的方法，给第二个盒子添加样式。而内容则有表格的形式构成。第一行是星期。利用循环，为下面创建表格。

8.showCalendarData函数。表格创建好了，下面让就把日期填入表格中吧。根据第三点，获取年月日。

9.设置顶部标题栏中年月信息。

10.设置表格中的日期数据。

11.绑定上个月下个月事件。

12.触发上下月图标。